(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{215:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANgSURBVEiJrZVLiFxFFIa/U9W3uufVPU8UHxBxoYsYjIK7QDARJJJFNgkYCRqfcaELneAu7sS4EwOiDkpAECTb7HwjiiAiURkxRN3EmJlOp999+96q42LsTj+mp0fwrC5V9f9fnXNuVYmqMi7yZ/MLLnYnfOqP+bovaKIXTMacKC+XfxunzYx1B1zbva+iB01kMLOGpJTs87H/Crh5nFYGMxBEFlYWHgsa9otKE0ML5UUAEaGz3tc84uQDUcklleReMfJFtVV9Xk9pGAkQRObfmz8HHOo1dNaRd3mMGGIfU21XCT0+6pX2ehuUy3Vfv70XYnppc+/OPQocsmIpZAssTSyxMLFAwRUwsrE0a7PkMrn+rK0QFSJCHG6Zzk2/1TvX1wMR2QswGU2StVkArNihumbMcOtMziBWIOXBvvEBQBHAWTdk0AlFqbfroybBUhoJ0KBXBemr72BU4gpe/bB36Pbyat+mO02eX5k/mSHz2mxu1mxWlo55y7dGwjVR4rUYcXK+9krtkW4GiyuLD4jK67lMblNzRceaA0gkuHlHqIcD+dP5J7oARQ8CCDIk8uoptUpjzTthcgYxggY9fgMQdCdAM22i3DgXsY8ptUqkIe2OFRIlGt2ijUycoKne2QWIkR86uy02i9TaNUqtEuW4PNTwUxeqHF5tbAnQtiJWVruAJErO8G/3gwYaaYMkJAAc+Cvm4SsxAFGApZrnetaw1AwU4uFU0koKQjAZ82wXUDlWKSr6EPDzoMAAT11qcF8p4bamJ0khlwaWPy2zay0ZMk9ractMmiOdm3boslt8Z/FuNXoGNk6kVXjjxwpLceCbRceuSzHXm9DKG17dWwAguZYQkrBmnX28vFw+P7jBvlh/Zn3VZuxR4DtV1WrS8G/fyuVJr+z7O6btwQic3T35GUo7LafqY193Wbd/0HzTDHpj6s2p+4MLxeZzzT8+P26+BPb8fg2c5c+j58KO/On8XZGNbPGl4i+jPLZ8cOov1L/vfKvKtyK6RwFr9CJA5WTl1630sEmJRoUIcwDOQhpkx3Z12wYgursD8GH8U/mfAF8/KTMoOwEmIkgCUx8fljv+N0Cq5mUgCzCThchAovLhdrRb/kUAnzwtN1kvF4Hpzlgthis1mJnQe458pD9tpf8H1RKawT1vR7kAAAAASUVORK5CYII="},216:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAWwAAAFsB1WNqDwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFFSURBVDiNrZMxagJBFIb/mYWZCYropnIVwVTLNqIXME3IAbRWcgRPEDyBRwim1gMEm+QCCWmWrQyIWausEhR3BoZJE8MmRdg1+er3fcXjPWKMQRLenbq5fHEghKgzzioAoJQM472c77abkZx0guQ8OQQIASn0ZsNq2el7nluzLOtbWGsN3w8Wy1U4fr+9uDYG5itACMjp1f1dq9lo23aJ4ReiaK0en54f3m7OL42BoQBQ6M2GaWQAsO0SazUb7UJvNgQAyrtTt1p2+mnkZKRadvq8O3VpLl8ceJ5bSysf8Dy3lssXB1Sc8LOfC0uDZVkQQtQpY9zJbH/COKvQY+UDVCkZHisrqV5pvJdzrXVmWWuNOI5f6G67Gfl+sMga8P1gsdtuRlROOsFyFY6jaK3SylG0VstVOJaTTvDnU/6fZ0qS9Z0/ANkRt3ElFBCxAAAAAElFTkSuQmCC"},228:function(e,t,n){e.exports=n(448)},448:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(35),i=n.n(o),l=(n(233),n(54)),s=n(55),c=n(57),u=n(56),m=n(58),p=n(456),A=n(453),h=n(454),g=n(455),f=n(449),d=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).capitalize=function(e){if(e)try{return-1!==e.indexOf(" ")?e.split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" "):e.charAt(0).toUpperCase()+e.slice(1)}catch(t){console.error("Error",t)}},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return Object.keys(this.props.tree).length>0?r.a.createElement(p.a,{columns:2},r.a.createElement(p.a.Column,null,r.a.createElement("a",{href:this.props.wiki_url,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("p",{style:{textAlign:"center"}},"click here for more details"),r.a.createElement(A.a,{size:"medium",src:this.props.image_url}))),r.a.createElement(p.a.Column,null,r.a.createElement(h.a,null,r.a.createElement(g.a,null," ",r.a.createElement("a",{href:this.props.wiki_url,target:"_blank",rel:"noopener noreferrer"},this.capitalize(this.props.tree.spc_common))),r.a.createElement(h.a.Content,{verticalAlign:"middle"},r.a.createElement(h.a.Description,null,r.a.createElement("p",null,"Latin Species Name: ",this.capitalize(this.props.tree.spc_latin)),r.a.createElement("p",null,"Nearest Address: ",this.props.tree.address),r.a.createElement("p",null,"Status: ",this.props.tree.status),r.a.createElement("p",null,"Diameter: ",this.props.tree.tree_dbh," cm."),r.a.createElement("p",null,"Neighborhood: ",this.props.tree.nta_name),r.a.createElement("p",null,"Problems: ",this.props.tree.problems),r.a.createElement(f.a,{name:"heart",color:"Poor"===this.props.tree.health?"red":"green"}),"Tree Health: ",this.props.tree.health))))):r.a.createElement(g.a,{as:"h3",textAlign:"center"},"Click on any tree for information.")}}]),t}(a.Component),k=n(43),b=n(215),w=n.n(b),E=n(216),y=n.n(E),C=Object(k.withScriptjs)(Object(k.withGoogleMap)(function(e){return r.a.createElement("div",{style:{height:275,width:"95%",display:"flex",flexFlow:"column wrap",justifyContent:"center",padding:0}},r.a.createElement(k.GoogleMap,{defaultZoom:18.5,center:0===e.lat?{lat:e.userLat,lng:e.userLon}:{lat:e.lat,lng:e.lon},defaultOptions:{mapTypeControl:!1}},e.trees.map(function(t){return r.a.createElement(k.Marker,{position:{lat:Number(t.latitude),lng:Number(t.longitude)},icon:w.a,key:t.tree_id,onClick:function(){return e.handleClick(t)}})}),r.a.createElement(k.Marker,{position:{lat:e.lat,lng:e.lon}}),r.a.createElement(k.Marker,{position:{lat:e.userLat,lng:e.userLon},icon:y.a})))})),O=function(e,t){var n=e+.002,a=t-.002,r=t+.002;if(e)return fetch("https://data.cityofnewyork.us/resource/nwxe-4ae8.json?$where=latitude >= ".concat(e-.002," AND latitude <= ").concat(n," AND longitude >= ").concat(a," AND longitude <= ").concat(r)).then(function(e){return e.json()})},j=function(e){return fetch("https://en.wikipedia.org/w/api.php?action=query&origin=*&format=json&prop=pageimages%7Cpageterms&generator=prefixsearch&redirects=1&formatversion=2&piprop=thumbnail&pithumbsize=250&pilimit=20&bptterms=description&gpssearch=".concat(e,"&gpslimit=1")).then(function(e){return e.json()})},v=function(e){return fetch("https://en.wikipedia.org/w/api.php?action=opensearch&origin=*&search=".concat(e,"&limit=1&format=json")).then(function(e){return e.json()})};n(445).config();var U=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={userLat:0,userLon:0,lat:0,lon:0,trees:[],clickedTree:{},image_url:"",wiki_url:"",paragraph:""},n.getLocation=function(){var e=navigator.geolocation;e?e.getCurrentPosition(function(e){return n.showPosition(e)},n.errorFunction):alert("Geolocation is not supported by this browser.")},n.errorFunction=function(){console.log("Geolocation error caught."),alert("Unable to retrieve your location. Please check your browser's location settings.")},n.showPosition=function(e){n.setState({userLat:e.coords.latitude,userLon:e.coords.longitude},function(){O(n.state.userLat,n.state.userLon).then(function(e){return n.setTrees(e)})})},n.setTrees=function(e){n.setState({trees:e})},n.handleClick=function(e){n.setState({clickedTree:e,lat:Number(e.latitude),lon:Number(e.longitude)},function(){return n.getImage(n.state.clickedTree.spc_common)})},n.getImage=function(e){console.log(e),j(e).then(function(e){return n.setImage(e)})},n.setImage=function(e){e.query.pages[0].thumbnail&&n.setState({image_url:e.query.pages[0].thumbnail.source},function(){return n.setWikiPage()})},n.setWikiPage=function(){v(n.state.clickedTree.spc_common).then(function(e){return n.setState({wiki_url:e[3][0]})})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getLocation(),j()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{as:"h2",textAlign:"center"},"A Tree Grows in... ",this.state.trees[1]?this.state.trees[1].nta_name.includes("Village")?" the "+this.state.trees[1].nta_name:this.state.trees[1].nta_name:null,r.a.createElement(g.a.Subheader,{as:"h3"},"There are ",this.state.trees.length," trees near your block!")),r.a.createElement("br",null),r.a.createElement(p.a,{stackable:!0,columns:2,style:{margin:1}},r.a.createElement(p.a.Column,null,r.a.createElement(C,{trees:this.state.trees,lat:this.state.lat,lon:this.state.lon,userLat:this.state.userLat,userLon:this.state.userLon,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyDhkn9ea3jg99u1BZqNrroIQ72C9c44HeM&v=3.exp&libraries=geometry,drawing,places",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"100%",width:"100%"}}),mapElement:r.a.createElement("div",{style:{height:"90%"}}),handleClick:this.handleClick})),r.a.createElement(p.a.Column,null,r.a.createElement(d,{tree:this.state.clickedTree,image_url:this.state.image_url,wiki_url:this.state.wiki_url}))))}}]),t}(a.Component),L=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(U,null)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[228,2,1]]]);
//# sourceMappingURL=main.77084bd4.chunk.js.map